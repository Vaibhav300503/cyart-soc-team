# Week 1 — SOC Fundamentals and Operations  

**Author:** Vaibhav Deep Singh  
**Date:** $(date +"%d %b %Y")  

---

## 🎯 Objective
To demonstrate SOC fundamentals by simulating basic monitoring activities:  
- Collect and analyze authentication logs for failed logins  
- Generate and validate IDS alerts (Suricata) triggered by an exploit run via Metasploit  
- Document the SOC workflow (Detection → Triage → Response)

---

## 🧰 Environment Setup
| Component | Purpose | Notes |
|------------|----------|-------|
| **Kali Linux** | Analyst workstation | Tools already installed |
| **Docker Metasploitable / Metasploit** | Vulnerable target / exploit framework | Exploit run performed from Kali using `msfconsole` |
| **Suricata** | IDS for network monitoring | Monitoring `docker0` (or host interface) |
| **osquery** | Endpoint visibility | For process/network evidence |

---

## 🧪 Lab Tasks Performed

### 1️⃣ Failed SSH Login Simulation  
- Repeated wrong password attempts to simulate brute-force behavior.  
- Authentication failures captured in host auth logs.  
### 2️⃣ Metasploit Exploit & IDS Detection  
- Used Metasploit to run a quick exploit against the Metasploitable instance (local target).  
- Suricata detected network activity generated by the exploit and produced an alert. 

### 3️⃣ Custom Suricata Rule (optional for deterministic alerts)  
Example rule used during tuning/testing (if added):
```bash
alert http any any -> any any (msg:"TEST - Malicious Domain Access"; content:"malicious.com"; http_host; sid:1000001; rev:1;)
````

### 4️⃣ Process Inspection (osquery)

Collected a snapshot of running processes during/after the exploit:

```bash
osqueryi "SELECT pid, name, path, cmdline FROM processes LIMIT 20;" > Week1_processes.txt
```

(If not included as a screenshot, the text file is in evidence/.)

---

## 📂 Evidence Summary

| Evidence File / Screenshot               | Description                                                           |
| ---------------------------------------- | --------------------------------------------------------------------- |
| **Week1_ssh_failed.png**                 | Screenshot of multiple failed SSH login attempts                      |
| **Week1_suricata_alert.png**             | Screenshot showing Suricata alert triggered during Metasploit exploit |
| **Week1_processes.txt**                   | osquery snapshot of running processes                                 |


## 🧩 Analysis & Findings

* Suricata successfully detected exploit-related network traffic during the Metasploit run.
* SSH failed attempts demonstrate credential attack coverage in logs.
* The combination of network IDS and endpoint visibility provides correlation points for triage.

---

## 🧠 ATT&CK Mapping

| Tactic                            | Technique ID                 | Description                                                                       |
| --------------------------------- | ---------------------------- | --------------------------------------------------------------------------------- |
| **Initial Access / Exploitation** | T1190                        | Exploit Public-Facing Application (Metasploit exploit against vulnerable service) |
| **Credential Access**             | T1110                        | Brute Force / Failed Logins                                                       |
| **Persistence**                   | T1543 *(if service created)* | Create or Modify System Process / Service (if simulated)                          |

---

## 🩺 SOC Workflow Demonstrated

1. **Detection:** Suricata alert triggered by exploit traffic
2. **Triage:** Analyst verified attacker IP and timeline from logs
3. **Investigation:** Collected osquery/process and auth log evidence
4. **Response:** Documented event and recommended blocking/containment

---

## ✅ Conclusion & Recommendations

* **Immediately** block malicious IPs (iptables/CrowdSec) seen in alerts.
* **Harden and patch** vulnerable services (Metasploitable is intentionally vulnerable; for real infra, patch).
* **Centralize logs** into a SIEM and tune IDS rules to reduce false positives.
